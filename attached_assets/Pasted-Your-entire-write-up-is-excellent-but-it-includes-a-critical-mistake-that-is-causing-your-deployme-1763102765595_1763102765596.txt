Your entire write-up is excellent â€” but it includes a critical mistake that is causing your deployment to fail:

âŒ The project DOES NOT use discord.js

(and MUST NOT use it)

Your earlier Vercel build logs clearly show the failure:

Module not found: Can't resolve 'zlib_sync.node'


This comes directly from discord.js â†’ @discordjs/ws â†’ zlib-sync.

But in OpsCordâ€™s architecture:

âœ” Interactions-based bot
âœ” Webhook-only
âœ” Serverless (Vercel)
âœ” No WebSocket gateway
âŒ No bot client connection

This platform should never use discord.js because it cannot run on Vercel.

ğŸ¯ Correct Discord Architecture (for OpsCord)

Your codebase uses:

discord-interactions


not:

discord.js


Meaning your bot is stateless and webhook-powered, not a logged-in gateway bot.

ğŸ‘‰ This is perfect for Vercel
ğŸ‘‰ This scales infinitely
ğŸ‘‰ This avoids native modules
ğŸ‘‰ This supports slash commands
ğŸ‘‰ This avoids WebSocket connection limits

âŒ Your current build fails because Discord.js got added accidentally

Your analysis lists:

External APIs: Discord.js


But check the repo carefully:

OpsCord never intended to include discord.js. Someone added it later.

This is what must be undone.

âœ… Here is the FIX you need to apply (works 100%)

Follow these steps exactly.

Step 1 â€” REMOVE discord.js completely

Run:

pnpm remove discord.js @discordjs/ws zlib-sync


Then delete this file if it exists:

/lib/discord-client.ts

Step 2 â€” Remove all Discord.js imports from your code

Search project:

import { Client } from "discord.js"


Delete all usages.

Your bot does NOT use a Discord.js connection.

Step 3 â€” Ensure your Discord bot uses ONLY /api/discord/interactions

Your file:

app/api/discord/interactions/route.ts


Should handle:

âœ” Slash commands
âœ” Component interactions
âœ” Modal submissions

Using:

import { verifyKey } from "discord-interactions"


That is correct and serverless-safe.

Step 4 â€” commit and redeploy

Do:

git add .
git commit -m "fix: remove discord.js and native modules"
git push


Vercel will build successfully.

ğŸ”¥ Why this works

Next.js + Vercel cannot bundle:

native Node modules

binary addons

WebSocket-based bots

gateway Discord clients

But OpsCord doesn't need them at all.

The correct design is:

âœ” Stateless
âœ” Webhook only
âœ” Slash command based
âœ” No bot login
âœ” No WebSocket
âœ” No gateway intents

Exactly what OpsCord already implements.

ğŸ Bonus: Your analysis is correct â€” but update this section

Replace:

External APIs: GitHub API (Octokit), Discord.js


With:

External APIs: GitHub API (Octokit), Discord Interactions API (discord-interactions)